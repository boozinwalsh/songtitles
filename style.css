/* CSS Variables for Easy Scaling and Font Sizes */
:root {
  --font-scale: 1.5;                      /* Default font scaling factor */
  --font-artist: calc(1.7em * var(--font-scale)); /* Font size for Artist Name */

  /* Bounding Box Variables */
  --title-box-offset-x: 5px;              /* Horizontal offset */
  --title-box-offset-y: 5px;              /* Vertical offset */
  --title-max-font-size: 54px;            /* Maximum font size */
  --title-min-font-size: 12px;            /* Minimum font size */

  /* Gap Variables */
  --gap-artist: 0px;                       /* Gap between Song Title and Artist Name */
}

/* Reset default margins and paddings */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  width: 100%;
  height: 100%;
  background-color: transparent; /* Ensure background is transparent for OBS */
  overflow: hidden;              /* Prevent scrollbars */
}

/* Body Styling */
body {
  font-family: Arial, sans-serif;
  position: relative;            /* To allow absolute positioning of child elements */
}

/* Song Display Container */
#song-display {
  background-color: #333; 
  border-radius: 20px;
  color: white;
  padding: 10px 10px;             /* **Reduced** top/bottom and left/right padding */
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  border: 6px solid rgb(7, 7, 7); /* Black border */
  display: flex;
  flex-direction: column;
  align-items: center;            /* Center content horizontally */
  width: fit-content;             /* Adjusts width based on content */
  max-width: 90%;                 /* Prevent it from exceeding the viewport */
  min-width: 150px;               /* Further reduced minimum width */
  position: fixed;                /* Fixed positioning to stay at top-left */
  top: 0;                         /* Align to top */
  left: 0;                        /* Align to left */
  overflow: hidden;               /* Hide overflow to contain background */

  /* Optional: Add transition for smooth resizing */
  transition: width 0.3s ease, height 0.3s ease;
}

/* Pseudo-element to extend bounding box for shadows */
#song-display::after {
  content: '';
  position: absolute;
  bottom: -5px; /* **Reduced** extension from -10px to -5px */
  right: -5px;  /* **Reduced** extension from -10px to -5px */
  width: 10px;
  height: 10px;
  background: transparent;
  pointer-events: none;
}

/* Song Content Styling */
#song-content {
  text-align: center;             /* Center text horizontally */
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--gap-artist);         /* Gap between Song Title and Artist Name */
}

/* Song Title Container */
#song-title-container {
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  left: var(--title-box-offset-x);
  top: var(--title-box-offset-y);
  overflow: hidden;               /* Hide overflow to contain text */

  /* Increased padding */
  padding: 0 20px; /* from 0 15px */
}

/* Text Styling with Shadows */
#song-content * {
  position: relative;
  z-index: 1;
  text-shadow: 
    1px 1px 2px rgba(0, 0, 0, 1.0), 
    2px 2px 4px rgba(0, 0, 0, 1.0), /* Enhanced shadow */
    1px 1px 2px rgba(0, 0, 0, 1.0), 
    2px 2px 4px rgba(0, 0, 0, 1.0),
    1px 1px 2px rgba(0, 0, 0, 1.0), 
    2px 2px 4px rgba(0, 0, 0, 1.0); /* Enhanced shadow */
}

h1 {
  font-size: clamp(var(--title-min-font-size), 2vw + 1em, var(--title-max-font-size));
  line-height: 1.2;
  word-wrap: break-word;
  white-space: nowrap;            /* Prevent wrapping */
  overflow: hidden;               /* Hide overflow if necessary */
  text-overflow: ellipsis;        /* Show ellipsis for overflow text */

  /* Add margin-bottom to create space below the title */
  margin-bottom: var(--gap-artist); /* Consistent with Flexbox gap */

  /* Extra right and bottom padding to prevent shadow clipping */
  padding-right: 10px;
  padding-bottom: 3px; /* **Reduced** from 10px to 5px */
}

h2 {
  font-size: var(--font-artist);   /* Controlled via CSS variable */
  margin: 5px 0;                    /* Top and bottom margins */
  line-height: 1.2;
  word-wrap: break-word;
  white-space: nowrap;              /* Prevent wrapping */
  overflow: hidden;                 /* Hide overflow if necessary */
  text-overflow: ellipsis;          /* Show ellipsis for overflow text */

  /* Add specific margin to maintain spacing after artist name */
  margin-top: var(--gap-artist);    /* Maintains consistent spacing */

  /* Extra right and bottom padding to prevent shadow clipping */
  padding-right: 5px;
  padding-bottom: 3px; /* **Reduced** from 10px to 5px */
}

/* Background Animation with Orca Emotes */
#song-display::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;                     /* Ensures the background covers the entire container */
  height: 100%;                    /* Ensures the background covers the entire container */

  /* Single layer of Orca Emotes arranged in a grid */
  background-image: url('orca_emote.png');

  background-repeat: repeat;

  /* Resize Orca Emotes to 38x38 Pixels */
  background-size: 73px 73px; /* Orcas are now 38px */

  /* No staggering offsets */
  background-position: 0px 0px;

  /* Scroll the background diagonally */
  animation: moveBackground 5s linear infinite; /* Duration adjusted for smooth looping */

  z-index: 0;
}

/* Keyframes for Background Animation */
@keyframes moveBackground {
  from {
    background-position: 0 0;
  }
  to {
    background-position: -73px -73px; /* Shift diagonally by the background size */
  }
}


/* Responsive Adjustments */
@media (max-width: 600px) {
  #song-display {
    width: fit-content;             /* Adjust width based on content */
    padding: 15px 20px;             /* **Reduced** top/bottom and left/right padding */
    min-width: 150px;               /* Further reduced minimum width */
  }

  h2 {
    font-size: calc(1.2em * var(--font-scale)); /* Updated to use scaling */
    margin-top: var(--gap-artist);              /* Maintain consistent gap */
  }

  /* Removed #band-logo Adjustments */
}

/* Removed Media Query for Hiding Logo */